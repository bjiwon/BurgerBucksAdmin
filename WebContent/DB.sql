/* 관리자 사원 등록 테이블 생성 */

DROP TABLE BB_ADMIN
CASCADE CONSTRAINT;

DROP SEQUENCE BB_ADMIN_SEQ;

CREATE TABLE BB_ADMIN(
	SEQ NUMBER(10) PRIMARY KEY,
	ID VARCHAR2(20) UNIQUE,
	PASSWORD VARCHAR2(20) NOT NULL,
	NAME VARCHAR2(20) NOT NULL,
	PHONE VARCHAR2(20) NOT NULL,
	STORE_SEQ NUMBER(10) NOT NULL,
	DEL NUMBER(1) NOT NULL
)

CREATE SEQUENCE BB_ADMIN_SEQ
START WITH 1
INCREMENT BY 1;

SELECT SEQ, ID, PASSWORD, NAME, PHONE, STORE_SEQ, DEL
FROM BB_ADMIN
ORDER BY SEQ DESC

UPDATE BB_ADMIN
SET DEL=1
WHERE SEQ=1;

INSERT INTO BB_ADMIN(SEQ, ID, PASSWORD, NAME, PHONE, STORE_SEQ, DEL)
VALUES ( BB_ADMIN_SEQ.NEXTVAL,'admin2', 'admin2', 'admin2', '111-1111-1111', 1, 0 )

SELECT * FROM BB_ADMIN;


/* 지점 테이블 생성 */

DROP TABLE BB_STORE
CASCADE CONSTRAINT;

DROP SEQUENCE BB_STORE_SEQ;


CREATE SEQUENCE STORE_SEQ
START WITH 1
INCREMENT BY 1;

CREATE TABLE BB_STORE(
	SEQ NUMBER(10) PRIMARY KEY,
	NAME VARCHAR2(100) NOT NULL,
	PHONE VARCHAR2(20) NOT NULL,
	ADDRESS VARCHAR2(200) NOT NULL,
	LAT VARCHAR2(100) NOT NULL,
	LNG VARCHAR2(100) NOT NULL,
	DEL NUMBER(1) NOT NULL
)


CREATE SEQUENCE BB_STORE_SEQ
START WITH 1
INCREMENT BY 1;

INSERT INTO BB_STORE(SEQ, NAME, PHONE, ADDRESS, LAT, LNG, DEL)
VALUES ( BB_STORE_SEQ.NEXTVAL,'A', '123-1234-1234', '서울시', 1, 1, 0 )

SELECT * FROM BB_STORE;



ALTER TABLE BB_ADMIN
ADD CONSTRAINT FK_BB_STORE_SEQ FOREIGN KEY(STORE_SEQ)
REFERENCES BB_STORE(SEQ);


